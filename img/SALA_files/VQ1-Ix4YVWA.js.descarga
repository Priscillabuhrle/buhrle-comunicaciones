if (self.CavalryLogger) { CavalryLogger.start_js(["j02Fw"]); }

__d("XPrivacyAudienceAlignmentLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/privacy\/audience_alignment\/log\/",{client_time:{type:"Int"},event:{type:"Enum",required:true,enumType:1},product:{type:"Enum",required:true,enumType:1},shown_duration:{type:"Float"},value:{type:"Int"},source:{type:"Enum",enumType:1}});}),null);
__d('ReactComposerAudienceAlignment',['cx','csx','ReactComposerEvents','ReactComposerStatusStore','ReactComposerAudienceStore','ReactComposerAudienceActions','Arbiter','AsyncRequest','AudienceSelector','ContextualDialog','CSS','DialogExpansion','DOM','Event','Focus','Keys','ModalMask','PrivacyConst','SelectorDeprecated','Style','XPrivacyAudienceAlignmentLoggingController','curry','ge'],(function a(b,c,d,e,f,g,h,i){var j=false,k=void 0,l=void 0,m=void 0,n=200,o=void 0;function p(ta,ua){ta.setContext(ua);ta.show();}function q(ta,ua){var va=c('Style').get(ua.getContentRoot(),'margin-top');ta.setWidth(o);ta.show();c('Style').set(ta.getContentRoot(),'margin-top',va);}var r='wwwtux',s='onlyme-wwwtux',t='exposed',u='public_sticky',v='friends_sticky',w='only_me_sticky',x='custom_selection',y='selector',z='holdout',aa='dismissal',ba='learn_more',ca='blur',da='posted';function ea(ta,event,ua){var va=c('XPrivacyAudienceAlignmentLoggingController').getURIBuilder().setEnum('product',ta).setEnum('event',event).setInt('client_time',Date.now());m&&va.setFloat('shown_duration',(Date.now()-m)/1000);ua&&va.setInt('value',ua);var wa=new (c('AsyncRequest'))().setURI(va.getURI());wa.send();}function fa(ta,ua,va,wa,xa){if(j)return false;if(c('ReactComposerStatusStore').getTextLength(va)>0)return false;if(!wa)return false;if(xa&&xa.getPopover().isShown())return false;var ya=null;if(xa){ya=xa.getSelectedBaseValue();}else ya=parseInt(c('SelectorDeprecated').getValue(wa),10);return ya===ta;}function ga(){var ta=c('DOM').scry(document.body,'#pagelet_timeline_recent');if(ta.length>=1){var ua=c('DOM').scry(ta[0],'li.fbTimelineComposerCapsule');if(ua.length>=1)return ua[0];}return null;}function ha(ta,ua,va,wa){var xa,ya=void 0,za=void 0;if(wa){ya=wa.getMenuElement();}else{za=c('DOM').find(va,'div.audienceSelector');ya=c('DOM').scry(za,'div.wrap');}if(ya.length<1)return;var ab=ga(),bb=void 0;if(wa){wa.subscribeOnce('open',function(){if(ab)c('CSS').addClass(ab,"_2wc-");c('ContextualDialog').setContext(ua,ya);ua.show();});}else bb=c('SelectorDeprecated').listen(za,'open',function(){var db=c('DOM').scry(ya[0],'div.uiSelectorMenuWrapper');if(db.length>0){if(ab)c('CSS').addClass(ab,"_2wc-");c('ContextualDialog').setContext(ua,db[0]);ua.setOffsetX(12);ua.show();}else c('ModalMask').hide();c('SelectorDeprecated').unsubscribe(bb);});if(wa){wa.getPopover().subscribeOnce('hide',function(){ia(ua,ya,ab,ta);});}else (function(){var db=c('SelectorDeprecated').listen(za,'close',function(){ia(ua,ya[0],ab,ta);c('SelectorDeprecated').unsubscribe(db);});})();if(wa){c('CSS').addClass(ya,"_35mn");var cb=wa.getTriggerButtonElement();c('CSS').addClass(cb,"_35mn");}else c('CSS').addClass(ya[0],"_35mn");setTimeout(function(){c('ModalMask').show();c('Style').set(c('ModalMask').getNode(),'opacity','0.3');c('Style').set(c('ModalMask').getNode(),'background-color','rgb(0,0,0)');if(wa){wa.openSelectorExpanded();}else c('SelectorDeprecated').toggle(za);},20);}function ia(ta,ua,va,wa){c('ModalMask').hide();ta.hide();c('CSS').removeClass(ua,"_35mn");if(va)c('CSS').removeClass(va,"_2wc-");ja(wa);}function ja(ta){var ua=c('DOM').scry(ta,"._5yk2").pop();ua&&c('Focus').set(ua);}function ka(ta,ua,va,wa){ta.unsubscribe(l);ta.hide();ja(va);var xa=ma(ua);if(xa)xa.closeSelector();c('Arbiter').subscribeOnce(c('ReactComposerEvents').POST_STARTED+ua,function(){ea(wa,da);});}function la(ta){return c('ReactComposerAudienceStore').getAudienceElement(ta);}function ma(ta){return c('ReactComposerAudienceStore').getAudienceInstance(ta);}function na(ta,ua,va,wa,xa,ya){var za=la(ta),ab=ma(ta),bb=qa(wa),cb=pa(wa);if(bb===null||!cb)return;ka(va,ta,ua,ya);if(ab){ab.selectOption(bb);}else c('AudienceSelector').setAudience(ua,wa);c('ReactComposerAudienceActions').setAudience(ta,bb?bb.toString():null,wa);p(xa,za);ea(ya,cb);}function oa(ta){switch(ta){case c('PrivacyConst').BaseValue.EVERYONE:return r;case c('PrivacyConst').BaseValue.SELF:return s;default:return null;}}function pa(ta){switch(ta){case c('PrivacyConst').BaseValue.EVERYONE:return u;case c('PrivacyConst').BaseValue.ALL_FRIENDS:return v;case c('PrivacyConst').BaseValue.SELF:return w;default:return null;}}function qa(ta){switch(ta){case c('PrivacyConst').BaseValue.EVERYONE:return c('PrivacyConst').PostParam.EVERYONE;case c('PrivacyConst').BaseValue.ALL_FRIENDS:return c('PrivacyConst').PostParam.FRIENDS;case c('PrivacyConst').BaseValue.SELF:return c('PrivacyConst').PostParam.ONLY_ME;default:return null;}}function ra(ta,ua,va,wa,xa,ya,za){var ab=c('ReactComposerAudienceStore').getAudienceElement(ya)!=null;if(!ab){setTimeout(function(){return ra(ta,ua,va,wa,xa,ya,za);},n);return;}var bb=la(ya),cb=ma(ya);if(fa(ta,va,ya,bb,cb)){m=Date.now();if(ua){ea(za,z);}else{ea(za,t);setTimeout(function(){wa.show();var db=xa.parentElement,eb=db instanceof HTMLElement?db.offsetWidth:0;o=wa.getWidth()+eb-490;var fb=new (c('DialogExpansion'))(wa);fb.setTargetWidth(o);fb._onAfterShow();c('Focus').set(wa.getRoot());},100);}}}var sa={abort:function ta(){j=true;},startOnComposerFocus:function ta(ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb){var mb=c('ge')(lb);if(!mb)return;var nb=oa(ua);if(!nb)return;c('Arbiter').subscribeOnce(c('ReactComposerEvents').MENTION_INPUT_FOCUS+lb,function(){ra(ua,va,mb,wa,eb,lb,nb);});c('Event').listen(eb,'click',c('curry')(na,lb,mb,wa,db,xa,nb));c('Event').listen(gb,'click',c('curry')(na,lb,mb,wa,fb,ya,nb));c('Event').listen(hb,'click',function(){wa.subscribe('hide',function(){var ob=la(lb),pb=ma(lb);if(pb)pb.subscribeOnce('changed',function(event,qb){ea(nb,x,qb.base_value);});if(za)ha(mb,za,ob,pb);});ka(wa,lb,mb,nb);ea(nb,y);});if(ib)c('Event').listen(ib,'click',function(){var ob=la(lb);ka(wa,lb,mb,nb);ea(nb,aa);if(ab)p(ab,ob);});l=wa.subscribe('hide',function(){var ob=la(lb);ja(mb);ea(nb,aa);if(bb)p(bb,ob);});k=wa.subscribe('blur',function(){ea(nb,ca);});c('Event').listen(jb,'click',function(event){q(cb,wa);ea(nb,ba);});c('Event').listen(kb,'click',function(event){cb.hide();});if(ib)c('Event').listen(cb.getRoot(),'keydown',function(event){if(c('Event').getKeyCode(event)===c('Keys').ESC){cb.hide();c('Event').kill(event);}});}};f.exports=sa;}),null);